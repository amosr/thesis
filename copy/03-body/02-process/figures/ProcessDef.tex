%!TEX root = ../Main.tex

\begin{figure}
\begin{center}
\begin{minipage}[t]{0.4\textwidth}
\begin{tabbing}
MMMMMx \TABDEF @MMMMM@  \TABSKIP $\Exp$ \TABSKIP $\Exp$ \TABSKIP $\Exp$ \kill

\Exp,~$e$       \> ::= \> ~~~ $x~|~v~|~e~e ~|~ (e~||~e) ~|~ e+e ~|~ e~@/=@~e ~|~ e < e$ \\
\Value,~$v$     \> ::= \> ~~~ $\mathbb{N}~|~\mathbb{B}~|~(\lambda{}x.~e)~|~@uninitialised@$ \\
\Heap,~$bs$     \> ::= \> ~~~ $\cdot~|~bs,~x~=~v$ \\
\Updates,~$us$  \> ::= \> ~~~ $\cdot~|~us,~x~=~e$
\\[0.5em]

\Proc,~$p$      \> ::=\> \lstiproc@process@ \\
MMMMMM \= M \= \kill
\> \> \lstiproc@ins:   @  $(\Chan ~\mapsto~ \InputState)$ \\
\> \> \lstiproc@outs:  @  $\sgl{\Chan}$ \\
\> \> \lstiproc@heap:  @  \Heap \\
\> \> \lstiproc@label: @  \Label \\
\> \> \lstiproc@instrs:@  $(\Label ~\mapsto~ \Instr)$ 
\\[0.5em]
\InputState \> ::= \> ~~ \lstiproc@none@~$|$~\lstiproc@pending@~\Value~$|$~\lstiproc@have@~$|$~\lstiproc@closed@
\end{tabbing}

\begin{tabbing}
MMMMMM \TABDEF MMMM \TABSKIP $\Chan$ \TABSKIP $\Chan$ \TABSKIP $\Next$ \TABSKIP \kill

\Var,~$x$       \> $\to$ \> ~~~ (value variable) \\
\Chan,~$c$      \> $\to$ \> ~~~ (channel name) \\
\Label,~$l$     \> $\to$ \> ~~~ (label name) \\ 
\ChannelStates  \> ~ =   \> ~~~ $(\Chan \mapsto \InputState)$ \\[0.5em]

\Instr
    \> ::=\> \lstiproc@pull@  \> \Chan  \> \Var  \> \Next \> \Next \\
    \TABALT  \lstiproc@push@  \> \Chan  \> \Exp  \> \Next \\
    \TABALT  \lstiproc@close@ \> \Chan  \>       \> \Next \\
    \TABALT  \lstiproc@drop@  \> \Chan  \>       \> \Next \\
    \TABALT  \lstiproc@case@  \> \Exp   \> \Next \> \Next \\
    \TABALT  \lstiproc@jump@  \>        \>       \> \Next \\
    \TABALT  \lstiproc@exit@  \\
\\[0.5em]

\Next \> = \> $\Label~\times~\Updates$ 
\end{tabbing}
\end{minipage}
\end{center}
\caption{Process definitions}
\label{fig:Process:Def}
\end{figure}

