%!TEX root = ../Main.tex

\begin{figure}

$$
\boxed{\ProcInject{\Proc}{\Action}{\Proc}}
$$

$$
\ruleIN{
  p[@ins@][c] = @none@
}{
  \ProcInject{p}{(\Push~c~v)}{p~[@ins@ \mapsto (p[@ins@][c \mapsto @pending@~v]) ] }
}{InjectPush}
$$

$$
\ruleIN{
  p[@ins@][c] = @none@
}{
  \ProcInject{p}{(\Close~c)}{p~[@ins@ \mapsto (p[@ins@][c \mapsto @closed@]) ] }
}{InjectClose}
$$

$$
\ruleIN{
  c \not\in p[@ins@]
}{
  \ProcInject{p}{(\Push~c~v)}{p}
}{InjectNopPush}
%
\enskip
%
\ruleIN{
  c \not\in p[@ins@]
}{
  \ProcInject{p}{(\Close~c)}{p}
}{InjectNopClose}
$$

$$
\ruleAx{
  \ProcInject{p}{(\cdot)}{p}
}{InjectNopInternal}
$$


$$
\boxed{\ProcsInject{\sgl{\Proc}}{\Action}{\sgl{\Proc}}}
$$

$$
\ruleIN{
  \{~ \ProcInject{p_i}{a}{p'_i} ~\}^i
}{
  \ProcsInject{\sgl{p_i}^i}{a}{\sgl{p'_i}^i}
}{InjectMany}
$$

\caption{Injection of message actions into input channels}
\label{fig:Process:Eval:Inject}
\end{figure}


